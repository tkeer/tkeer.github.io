"use strict";(self.webpackChunkeshop=self.webpackChunkeshop||[]).push([["src_app_standalone_components_chatbot_chatbot_component_ts"],{3530:(l,d,n)=>{n.d(d,{_:()=>m});var e=n(5312),p=n(4438);let m=(()=>{class a{constructor(){}transform(i,r={}){return!i&&!1!==r.showBroken&&(i="assets/images/broken-image.png"),i?r.eshopUrl?`${r.eshopUrl}/${i}`:e.c.resourceUrl?`${e.c.resourceUrl}/${i}`:`/${i}`:""}static#e=this.\u0275fac=function(r){return new(r||a)};static#t=this.\u0275pipe=p.EJ8({name:"resourceUrl",type:a,pure:!0,standalone:!0})}return a})()},1063:(l,d,n)=>{n.r(d),n.d(d,{ChatbotComponent:()=>P});var e=n(4438),p=n(177),m=n(9213),a=n(1780),_=n(6977),i=n(8720),r=n(1482),x=n(3530),u=n(6344),f=n(2672);const M=["messagesRef"],b=["input"];function C(o,h){if(1&o&&(e.nrm(0,"img",20),e.nI1(1,"async"),e.nI1(2,"resourceUrl")),2&o){const t=e.XpG(2);e.Y8G("src",e.bMT(2,3,e.bMT(1,1,t.dataService.favicon$)),e.B4B)}}function O(o,h){if(1&o&&(e.j41(0,"div",17)(1,"figure",18),e.DNE(2,C,3,5,"img",19),e.k0s(),e.EFF(3),e.k0s()),2&o){const t=h.$implicit;e.AVh("message-personal",t.personal),e.R7$(2),e.Y8G("ngIf",!t.personal),e.R7$(),e.SpI(" ",t.message," ")}}let P=(()=>{class o extends r.e{constructor(t,s){super(),this.api=t,this.dataService=s,this.hide=new e.bkB,this.turns=[],this.messages=[]}ngOnInit(){this.restoreMessagesFromSessionStorage(),this.scrollToLastMessage()}insertMessage(){const t=this.input?.nativeElement.value;t&&(this.messages.push({message:t,personal:!0}),this.api.post("chatbot/chat",{query:t,turns:this.turns},i.w.com).pipe((0,_.Q)(this.destroy$)).subscribe(s=>{this.messages.push({message:s.res,personal:!1}),this.turns.push([t,s.res]),this.scrollToLastMessage(),this.saveMessagesFromSessionStorage()}),this.input.nativeElement.value="",this.scrollToLastMessage())}scrollToLastMessage(){setTimeout(()=>{this.messageRef?.nativeElement.scrollTo(0,this.messageRef?.nativeElement.scrollHeight)})}restoreMessagesFromSessionStorage(){this.messages=JSON.parse(sessionStorage.getItem("chatbot-messages")||"[]");let t="";this.messages.forEach(s=>{s.personal?t=s.message:t&&(this.turns.push([t,s.message]),t="")})}saveMessagesFromSessionStorage(){sessionStorage.setItem("chatbot-messages",JSON.stringify(this.messages))}static#e=this.\u0275fac=function(s){return new(s||o)(e.rXU(u.G),e.rXU(f.u))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-chatbot"]],viewQuery:function(s,c){if(1&s&&(e.GBs(M,7),e.GBs(b,5)),2&s){let g;e.mGM(g=e.lsd())&&(c.messageRef=g.first),e.mGM(g=e.lsd())&&(c.input=g.first)}},outputs:{hide:"hide"},standalone:!0,features:[e.Vt3,e.aNF],decls:25,vars:12,consts:[["messagesRef",""],["input",""],[1,"messenger",2,"z-index","2147483650 !important"],[1,"menu"],[1,"button","text-grey-dark","mt-1"],[1,"mt-2",3,"click"],[1,"agent-face"],[1,"half"],["alt","Eshop",1,"agent","circle",3,"src"],[1,"chat"],[1,"chat-title"],[1,"messages"],[1,"messages-content","hide-scrollbar",2,"overflow-y","scroll","padding","0 10px"],["class","message",3,"message-personal",4,"ngFor","ngForOf"],[1,"message-box","mb-2u"],[1,"message-input","hide-scrollbar",3,"placeholder"],["type","submit",1,"message-submit",3,"click"],[1,"message"],[1,"avatar"],[3,"src",4,"ngIf"],[3,"src"]],template:function(s,c){if(1&s){const g=e.RV6();e.j41(0,"section",2)(1,"div",3)(2,"div",4)(3,"mat-icon",5),e.bIt("click",function(){return e.eBV(g),e.Njj(c.hide.emit())}),e.EFF(4,"close"),e.k0s()()(),e.j41(5,"div",6)(6,"div",7),e.nrm(7,"img",8),e.nI1(8,"async"),e.nI1(9,"resourceUrl"),e.k0s()(),e.j41(10,"div",9)(11,"div",10)(12,"h1"),e.EFF(13,"eShop"),e.k0s()(),e.j41(14,"div",11)(15,"div",12,0),e.DNE(17,O,4,4,"div",13),e.k0s()(),e.j41(18,"div",14),e.nrm(19,"textarea",15,1),e.nI1(21,"translate"),e.j41(22,"button",16),e.bIt("click",function(){return e.eBV(g),e.Njj(c.insertMessage())}),e.EFF(23),e.nI1(24,"translate"),e.k0s()()()()}2&s&&(e.R7$(7),e.Y8G("src",e.bMT(9,6,e.bMT(8,4,c.dataService.favicon$)),e.B4B),e.R7$(10),e.Y8G("ngForOf",c.messages),e.R7$(2),e.FS9("placeholder",e.bMT(21,8,"type_message")),e.R7$(4),e.JRh(e.bMT(24,10,"send")))},dependencies:[p.MD,p.Sq,p.bT,p.Jj,m.m_,m.An,a.h,a.D9,x._],styles:[".chat[_ngcontent-%COMP%]{position:relative;width:100%;height:calc(100% - 15px);max-height:500px;z-index:10;overflow:hidden;background:transparent;border-radius:20px;display:flex;justify-content:space-between;flex-direction:column}.chat-title[_ngcontent-%COMP%]{flex:0 1 45px;position:relative;z-index:2;width:100%;border-bottom:1px solid #ccc;color:#777;padding-top:50px;padding-bottom:5px;background-color:#fff;text-transform:uppercase;text-align:center}.chat-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:400;font-size:14px;margin:0}.chat-title[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{position:absolute;z-index:1;top:8px;left:9px;border-radius:30px;width:60px;height:60px;overflow:hidden;margin:0;border:1px solid #FFFFFF}.chat-title[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.messages[_ngcontent-%COMP%]{flex:1 1 auto;overflow:hidden;position:relative;width:100%}.messages[_ngcontent-%COMP%]   .messages-content[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:101%;width:100%}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{float:left;padding:6px 10px 7px;border-radius:20px 20px 20px 0;background:#eee;line-height:1.4;margin:12px 0 12px 35px;position:relative;border:1px solid #ccc}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{position:absolute;bottom:-4px;left:-35px;border-radius:30px;width:30px;height:30px;overflow:hidden;margin:0;border:2px solid rgba(255,255,255,.5)}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.messages[_ngcontent-%COMP%]   .message.message-personal[_ngcontent-%COMP%]{float:right;text-align:right;background:#fff;border:1px solid #ccc;border-radius:20px 20px 0}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]:last-child{margin-bottom:30px}.message-box[_ngcontent-%COMP%]{flex:0 1 42px;width:90%;background:#fff;margin:2px auto;padding:10px;position:relative;border-radius:20px;height:62px;border:1px solid #ccc}.message-box[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]{border:none;outline:none!important;resize:none;font-size:15px;height:48px;padding-right:20px;width:calc(100% - 50px);color:#444}.message-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus:-webkit-placeholder{color:transparent}.message-box[_ngcontent-%COMP%]   .message-submit[_ngcontent-%COMP%]{position:absolute;top:17px;right:10px;color:#4a90e2;border:none;background:#fff;font-size:12px;text-transform:uppercase;line-height:1;padding:6px 10px;border-radius:5px;outline:none!important}.message-box[_ngcontent-%COMP%]   .message-submit[_ngcontent-%COMP%]:hover{background:#fff;color:#333}.messenger[_ngcontent-%COMP%]{opacity:1;border-radius:20px;height:calc(100% - 60px)!important;max-height:460px!important;min-height:220px!important;width:320px;background:#ffffffe6;position:fixed;right:20px;bottom:28px;margin:auto;z-index:10;box-shadow:2px 10px 40px #16141366}.messenger[_ngcontent-%COMP%]   div.agent-face[_ngcontent-%COMP%]{position:absolute;left:0;top:-50px;right:0;margin:auto;width:101px;height:50px;background:transparent;z-index:12}.messenger[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:14px;color:#232323}.circle[_ngcontent-%COMP%]{display:block;width:80px;height:80px;margin:1em auto;background-size:cover;background-repeat:no-repeat;background-position:center center;border-radius:99em;border:2px solid #FFFFFF}.menu[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-size:30px;z-index:12;text-align:right;width:48px;line-height:25px;height:40px;border-top-right-radius:20px;position:absolute;right:0;padding-right:10px;cursor:pointer;transition:.3s all ease-in-out}@media only screen and (max-device-width: 667px),screen and (max-width: 450px){.messenger[_ngcontent-%COMP%]{z-index:2147483001!important;width:100%!important;height:100%!important;max-height:none!important;inset:0!important;border-radius:0!important;background:#fff}.messenger[_ngcontent-%COMP%]   div.agent-face[_ngcontent-%COMP%]{top:-10px!important}.chat[_ngcontent-%COMP%]{border-radius:0!important;max-height:initial!important}.chat-title[_ngcontent-%COMP%]{padding:20px 20px 15px 10px!important;text-align:left}.circle[_ngcontent-%COMP%]{width:80px;height:80px;border:1px solid #FFFFFF}.menu[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{border-top-right-radius:0}}@media only screen and (min-device-width: 667px){div.half[_ngcontent-%COMP%]{margin:auto;width:80px;height:40px;background-color:#fff;border-top-left-radius:60px;border-top-right-radius:60px;border-bottom:0;box-shadow:1px 4px 20px #16141399}}"]})}return o})()}}]);