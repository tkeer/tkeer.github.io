"use strict";(self.webpackChunkeshop=self.webpackChunkeshop||[]).push([["default-src_app_standalone_components_edit-address_edit-address_component_ts"],{1287:(Q,y,a)=>{a.r(y),a.d(y,{EditAddressComponent:()=>J});var l=a(7056),p=a(9417),b=a(6295),u=a(8720),f=a(980),c=a(4006),m=a(64),I=a(3887),h=a(3719),R=a(1482),T=a(6977),G=a(152),M=a(850),F=a(9042),e=a(4438),g=a(177),O=a(9213),P=a(9183),E=a(6600),C=a(1780);const $=o=>({default:o});function A(o,d){1&o&&e.nrm(0,"mat-spinner",9)}function N(o,d){1&o&&(e.j41(0,"mat-icon",10),e.EFF(1,"arrow_forward_ios"),e.k0s())}function Y(o,d){if(1&o&&(e.j41(0,"mat-option",11),e.EFF(1),e.k0s()),2&o){const n=d.$implicit;e.Y8G("value",n.value),e.R7$(),e.SpI(" ",n.label," ")}}function _(o,d){if(1&o&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o){const n=d.$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,"validation."+n.key,e.eq3(4,$,n.value))," ")}}function V(o,d){if(1&o&&(e.j41(0,"div",12),e.DNE(1,_,3,6,"mat-error",13),e.nI1(2,"keyvalue"),e.k0s()),2&o){const n=e.XpG();e.R7$(),e.Y8G("ngForOf",e.bMT(2,1,n.control.errors))}}let k=(()=>{class o extends R.e{constructor(){super(...arguments),this.appearance="fill",this.loading=!1,this.initialOptions=[],this.searchForm=new p.MJ,this.displayFn=n=>{const i=this.options.find(t=>t.value===n);return i&&i.label?i.label:""}}ngOnChanges(n){const i=n.options;i&&(this.initialOptions=i.currentValue,this.searchForm.setValue(this.control.getRawValue()))}ngOnInit(){this.searchForm.valueChanges.pipe((0,T.Q)(this.destroy$),(0,G.B)(150)).subscribe(n=>{n&&!n.trim||(this.options=this.initialOptions?.filter(i=>i.label.trim().toLowerCase().search(n?.trim().toLowerCase())>=0))})}static#e=this.\u0275fac=(()=>{let n;return function(t){return(n||(n=e.xGo(o)))(t||o)}})();static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-auto-complete"]],inputs:{label:"label",name:"name",placeholder:"placeholder",control:"control",appearance:"appearance",options:"options",loading:"loading"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:11,vars:11,consts:[["auto","matAutocomplete"],[1,"w-100",3,"appearance"],["matSuffix","",1,"suffix-icon"],["diameter","16","class","d-inline-flex",4,"ngIf"],["color","primary","style","rotate: 90deg",4,"ngIf"],["type","text","matInput","","autocomplete","no",3,"placeholder","formControl","matAutocomplete","name"],[3,"optionSelected","displayWith"],[3,"value",4,"ngFor","ngForOf"],["class","errors-wrapper",4,"ngIf"],["diameter","16",1,"d-inline-flex"],["color","primary",2,"rotate","90deg"],[3,"value"],[1,"errors-wrapper"],[4,"ngFor","ngForOf"]],template:function(i,t){if(1&i){const r=e.RV6();e.j41(0,"mat-form-field",1)(1,"mat-label"),e.EFF(2),e.k0s(),e.j41(3,"span",2),e.DNE(4,A,1,0,"mat-spinner",3)(5,N,2,0,"mat-icon",4),e.k0s(),e.nrm(6,"input",5),e.j41(7,"mat-autocomplete",6,0),e.bIt("optionSelected",function(v){return e.eBV(r),e.Njj(t.control.setValue(v.option.value))}),e.DNE(9,Y,2,2,"mat-option",7),e.k0s()(),e.DNE(10,V,3,3,"div",8)}if(2&i){const r=e.sdS(8);e.Y8G("appearance",t.appearance),e.R7$(2),e.JRh(t.label),e.R7$(2),e.Y8G("ngIf",t.loading),e.R7$(),e.Y8G("ngIf",!t.loading),e.R7$(),e.Y8G("placeholder",t.placeholder)("formControl",t.searchForm)("matAutocomplete",r)("name",t.name||t.label),e.R7$(),e.Y8G("displayWith",t.displayFn),e.R7$(2),e.Y8G("ngForOf",t.options),e.R7$(),e.Y8G("ngIf",t.control.touched)}},dependencies:[I.G,g.Sq,g.bT,O.An,P.LG,p.me,p.BC,p.l_,E.wT,g.lG,C.D9,h.rl,M.$3,h.nJ,h.TL,M.pN,F.fg],styles:["[_nghost-%COMP%]     .mat-mdc-text-field-wrapper{padding-bottom:4px!important}[_nghost-%COMP%]     .mdc-line-ripple{bottom:3px}[_nghost-%COMP%]     .mat-mdc-form-field-infix{min-height:53px}.suffix-icon[_ngcontent-%COMP%]{padding-right:12px}.errors-wrapper[_ngcontent-%COMP%]{font-size:75%;padding:0 1em}"]})}return o})();var j=a(3557),S=a(3599),L=a(6344),w=a(4738),x=a(1997);function X(o,d){if(1&o&&(e.nrm(0,"app-select",18),e.nI1(1,"translate")),2&o){const n=e.XpG();e.FS9("label",e.bMT(1,3,"address.type")),e.Y8G("control",n.form.controls.profile)("options",n.addressProfiles)}}function z(o,d){if(1&o&&(e.nrm(0,"app-input",19),e.nI1(1,"translate")),2&o){const n=e.XpG();e.FS9("label",e.bMT(1,2,"first_name")),e.Y8G("control",n.form.controls.firstName)}}function B(o,d){if(1&o&&(e.nrm(0,"app-input",20),e.nI1(1,"translate")),2&o){const n=e.XpG();e.FS9("label",e.bMT(1,2,"last_name")),e.Y8G("control",n.form.controls.lastName)}}function D(o,d){if(1&o&&e.nrm(0,"app-input",21),2&o){const n=e.XpG();e.Y8G("control",n.form.controls.companyName)}}function U(o,d){if(1&o&&(e.nrm(0,"app-input",22),e.nI1(1,"translate")),2&o){const n=e.XpG();e.FS9("label",e.bMT(1,2,"vat_number")),e.Y8G("control",n.form.controls.companyId)}}let J=(()=>{class o{constructor(n,i,t,r,s){this.api=n,this.dialogRef=i,this.translationService=t,this.data=s,this.addressProfiles=[{label:this.translationService.instant("address.personal"),value:l.E6.Individual},{label:this.translationService.instant("address.company"),value:l.E6.Company}],this.profileType=l.E6,this.AddressType=l.RX,this.countries=[],this.regions=[],this.cities=[],this.loading={state:!1,city:!1,country:!1,save:!1},s.address.profile=s.address.profile||l.E6.Individual,this.form=r.nonNullable.group({id:[s.address.id],profile:[s.address.profile,p.k0.required],firstName:[s.address.firstName,m.a.requiredIf("profile",l.E6.Individual)],lastName:[s.address.lastName,m.a.requiredIf("profile",l.E6.Individual)],email:[s.address.email,[m.a.requiredIf("profile",l.E6.Individual),p.k0.email]],companyName:[s.address.companyName,m.a.requiredIf("profile",l.E6.Company)],companyId:[s.address.companyId,m.a.requiredIf("profile",l.E6.Company)],addressLine1:[s.address.addressLine1,p.k0.required],addressLine2:[s.address.addressLine2],country:[s.address.country],countryCode:[s.address.countryCode,[p.k0.required,p.k0.maxLength(2)]],region:[s.address.region],regionCode:[s.address.regionCode,p.k0.required],city:[s.address.city,p.k0.required],phoneNumber:r.nonNullable.group({locale:[s.address.phoneNumber.locale,p.k0.required],value:[s.address.phoneNumber.value,p.k0.required]}),zipCode:[s.address.zipCode,p.k0.required],defaultAddress:[s.address.defaultAddress]}),s.address.id&&this.form.controls.profile.disable(),this.form.controls.profile.valueChanges.subscribe(()=>{this.form.controls.firstName.updateValueAndValidity(),this.form.controls.lastName.updateValueAndValidity(),this.form.controls.email.updateValueAndValidity(),this.form.controls.companyName.updateValueAndValidity(),this.form.controls.companyId.updateValueAndValidity()}),this.form.controls.countryCode.valueChanges.subscribe(v=>{this.form.controls.regionCode.reset(),this.fetchRegions()}),this.form.controls.regionCode.valueChanges.subscribe(v=>{this.form.controls.city?.reset(),this.fetchCities()})}ngOnInit(){this.fetchCountries(),this.fetchRegions(),this.fetchCities()}cancel(){this.dialogRef.close(null)}fetchCountries(){this.loading.country=!0,this.api.get("location/countries",u.w.usr).pipe((0,f.j)(()=>this.loading.country=!1)).subscribe(n=>{this.countries=n.map(i=>({label:i.name,value:i.iso2}))})}fetchRegions(){const n=this.form.controls.countryCode?.value;n&&(this.loading.state=!0,this.api.get(`location/counties/country-code/${n}`,u.w.usr).pipe((0,f.j)(()=>this.loading.state=!1)).subscribe(i=>this.regions=i.map(t=>({label:t.name,value:t.stateCode}))))}fetchCities(){const n=this.form.controls.regionCode?.value,i=this.form.controls.countryCode?.value;n&&i&&(this.loading.city=!0,this.api.get(`location/cities/country-code/${i}/state-code/${n}`,u.w.usr).pipe((0,f.j)(()=>this.loading.city=!1)).subscribe(t=>this.cities=t.map(r=>({label:r.name,value:r.name}))))}save(){if(this.form.markAllAsTouched(),this.intlPhoneInputComponent?.markAsTouched(),this.form.invalid)return;this.loading.save=!0;const n=l.pV.adapt(this.form.value),i=n.id?"put":"post";let t="address/delivery";this.data.type===l.RX.BILLING&&(t="address/billing",n.id&&(t+=this.data.address.profile===l.E6.Individual?"/individual":"/company")),this.data.type===l.RX.DELIVERY&&(n.profile=void 0),n.id&&(t=`${t}/${n.id}`),this.api.request(i,t,u.w.usr,{body:l.pV.toDto(n)}).pipe((0,f.j)(()=>this.loading.save=!1)).subscribe(r=>{this.dialogRef.close(l.pV.adapt(r))})}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(L.G),e.rXU(c.CP),e.rXU(C.c$),e.rXU(p.ok),e.rXU(c.Vh))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-edit-address"]],viewQuery:function(i,t){if(1&i&&e.GBs(b.$,5),2&i){let r;e.mGM(r=e.lsd())&&(t.intlPhoneInputComponent=r.first)}},standalone:!0,features:[e.aNF],decls:38,vars:55,consts:[[1,"d-flex","justify-content-between","align-items-center","dialog-heading"],[1,"d-flex","align-items-center"],[1,"title-icon","me-2","d-sm-none","cur-pointer",3,"click"],["mat-dialog-title","",1,"mb-0","dialog-title"],[1,"title-icon","d-none","d-sm-inline","cur-pointer",3,"click"],["mat-dialog-content","",1,"px-3","pt-4","pb-0","col-rep-1","col-rep-md-2","d-grid","gap-col-3","form-group"],[3,"control","label","options",4,"ngIf"],["name","firstName","class","new-row",3,"control","label",4,"ngIf"],["name","lastName",3,"control","label",4,"ngIf"],["label","Company name","name","companyName",3,"control",4,"ngIf"],["name","companyId",3,"control","label",4,"ngIf"],["name","email",3,"control","label"],["name","phoneNumber",3,"phoneNumber"],[3,"control","label","options","loading"],[3,"control","label","hideRequiredMarker"],["mat-dialog-actions","",1,"d-flex","justify-content-center","gap-sm-6","gap-4","mt-0","mt-md-2","mt-lg-1","dialog-action"],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","btn-primary",3,"click","appLoading"],[3,"control","label","options"],["name","firstName",1,"new-row",3,"control","label"],["name","lastName",3,"control","label"],["label","Company name","name","companyName",3,"control"],["name","companyId",3,"control","label"]],template:function(i,t){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"mat-icon",2),e.bIt("click",function(){return t.cancel()}),e.EFF(3,"close"),e.k0s(),e.j41(4,"span",3),e.EFF(5),e.nI1(6,"translate"),e.k0s()(),e.j41(7,"mat-icon",4),e.bIt("click",function(){return t.cancel()}),e.EFF(8,"close"),e.k0s()(),e.nrm(9,"mat-divider"),e.j41(10,"div",5),e.DNE(11,X,2,5,"app-select",6)(12,z,2,4,"app-input",7)(13,B,2,4,"app-input",8)(14,D,1,1,"app-input",9)(15,U,2,4,"app-input",10),e.nrm(16,"app-input",11),e.nI1(17,"translate"),e.nrm(18,"app-intl-phone-input",12)(19,"app-auto-complete",13),e.nI1(20,"translate"),e.nrm(21,"app-select",13),e.nI1(22,"translate"),e.nrm(23,"app-select",13),e.nI1(24,"translate"),e.nrm(25,"app-input",14),e.nI1(26,"translate"),e.nrm(27,"app-input",14),e.nI1(28,"translate"),e.nrm(29,"app-input",14),e.nI1(30,"translate"),e.k0s(),e.j41(31,"div",15)(32,"button",16),e.bIt("click",function(){return t.cancel()}),e.EFF(33),e.nI1(34,"translate"),e.k0s(),e.j41(35,"button",17),e.bIt("click",function(){return t.save()}),e.EFF(36),e.nI1(37,"translate"),e.k0s()()),2&i&&(e.R7$(5),e.JRh(t.data.title||e.bMT(6,35,"add"===t.data.mode?"address.add_new":"address.edit")),e.R7$(6),e.Y8G("ngIf",t.data.type===t.AddressType.BILLING),e.R7$(),e.Y8G("ngIf",t.form.controls.profile.value===t.profileType.Individual),e.R7$(),e.Y8G("ngIf",t.form.controls.profile.value===t.profileType.Individual),e.R7$(),e.Y8G("ngIf",t.form.controls.profile.value===t.profileType.Company),e.R7$(),e.Y8G("ngIf",t.form.controls.profile.value===t.profileType.Company),e.R7$(),e.FS9("label",e.bMT(17,37,"email")),e.Y8G("control",t.form.controls.email),e.R7$(2),e.Y8G("phoneNumber",t.form.controls.phoneNumber),e.R7$(),e.FS9("label",e.bMT(20,39,"country")),e.Y8G("control",t.form.controls.countryCode)("options",t.countries)("loading",t.loading.country),e.R7$(2),e.FS9("label",e.bMT(22,41,"state")),e.Y8G("control",t.form.controls.regionCode)("options",t.regions)("loading",t.loading.state),e.R7$(2),e.FS9("label",e.bMT(24,43,"city")),e.Y8G("control",t.form.controls.city)("options",t.cities)("loading",t.loading.city),e.R7$(2),e.Mz_("label","",e.bMT(26,45,"address_line")," 1"),e.Y8G("control",t.form.controls.addressLine1)("hideRequiredMarker",!1),e.R7$(2),e.Mz_("label","",e.bMT(28,47,"address_line")," 2"),e.Y8G("control",t.form.controls.addressLine2)("hideRequiredMarker",!1),e.R7$(2),e.FS9("label",e.bMT(30,49,"zip_code")),e.Y8G("control",t.form.controls.zipCode)("hideRequiredMarker",!1),e.R7$(4),e.JRh(e.bMT(34,51,"cancel")),e.R7$(2),e.Y8G("appLoading",t.loading.save),e.R7$(),e.JRh(e.bMT(37,53,"common.save")))},dependencies:[I.G,w.G,g.bT,O.An,x.q,C.D9,b.$,k,j.w,S.S,c.hM,c.BI,c.E7,c.Yi],styles:["[_nghost-%COMP%]     app-select .mat-mdc-form-field{width:100%}[_nghost-%COMP%]     .mat-mdc-form-text-infix{width:auto}[_nghost-%COMP%]     app-intl-phone-input .mat-mdc-form-field{width:100%}.form-group[_ngcontent-%COMP%] > app-input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   app-select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   app-auto-complete[_ngcontent-%COMP%]{margin-bottom:8.5px}@media screen and (min-width: 576px){.form-group[_ngcontent-%COMP%] > app-input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   app-select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   app-auto-complete[_ngcontent-%COMP%]{margin-bottom:4.5px}}@media screen and (min-width: 992px){.form-group[_ngcontent-%COMP%] > app-input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   app-select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   app-auto-complete[_ngcontent-%COMP%]{margin-bottom:23.5px}}.dialog-heading[_ngcontent-%COMP%]{padding:8px}.dialog-heading[_ngcontent-%COMP%]   .dialog-title[_ngcontent-%COMP%]{font-size:16px;white-space:nowrap}@media screen and (min-width: 375px){.dialog-heading[_ngcontent-%COMP%]{padding:16px}.dialog-heading[_ngcontent-%COMP%]   .dialog-title[_ngcontent-%COMP%]{font-size:20px}}.dialog-action[_ngcontent-%COMP%]{box-shadow:0 0 15px #00000040;flex-wrap:nowrap}.dialog-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;max-width:124px}@media screen and (max-width: 375px){.dialog-action[_ngcontent-%COMP%]{column-gap:8px!important;padding-right:4px;padding-left:4px}}.new-row[_ngcontent-%COMP%]{grid-column-start:1}"]})}return o})()}}]);