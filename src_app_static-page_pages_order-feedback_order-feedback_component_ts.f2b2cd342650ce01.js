"use strict";(self.webpackChunkeshop=self.webpackChunkeshop||[]).push([["src_app_static-page_pages_order-feedback_order-feedback_component_ts"],{1548:(R,u,i)=>{i.d(u,{T:()=>e});var e=function(d){return d.En="en",d.Ro="ro",d}(e||{})},9208:(R,u,i)=>{i.r(u),i.d(u,{OrderFeedbackComponent:()=>ee});var e=i(4438),d=i(3887),f=i(1548);const y=JSON.parse('{"thankYou":"Thanks for the feedback!","message":"We are trying to constantly improve our services, and you have just contributed to this process.","back":"Back to the site","error":"There was an error submitting your response."}'),C=JSON.parse('{"thankYou":"Multumim pentru feedback!","message":"Incercam sa ne imbunatatim constant serviciile, iar tu tocmai ai contribuit la acest proces.","back":"Inapoi pe site","error":"A ap\u0103rut o eroare la trimiterea r\u0103spunsului dvs."}');var v=i(8720),p=i(177),E=i(7673),x=i(4412),k=i(5964);const _=new e.nKC("recaptcha-language"),j=new e.nKC("recaptcha-base-url"),M=new e.nKC("recaptcha-nonce-tag"),V=new e.nKC("recaptcha-settings"),T=new e.nKC("recaptcha-v3-site-key"),F=new e.nKC("recaptcha-loader-options"),g={loadScript:function O(n,r,t,{url:c,lang:s,nonce:a}={}){window.ng2recaptchaloaded=()=>{t(grecaptcha)};const o=document.createElement("script");o.innerHTML="";const{url:h,nonce:l}=r(new URL(c||"https://www.google.com/recaptcha/api.js"));h.searchParams.set("render","explicit"===n?n:n.key),h.searchParams.set("onload","ng2recaptchaloaded"),h.searchParams.set("trustedtypes","true"),s&&h.searchParams.set("hl",s),o.src=h.href;const b=l||a;b&&o.setAttribute("nonce",b),o.async=!0,o.defer=!0,document.head.appendChild(o)},newLoadScript:function S({v3SiteKey:n,onBeforeLoad:r,onLoaded:t}){g.loadScript(n?{key:n}:"explicit",r,t)}};let m=(()=>{class n{static#e=this.ready=null;constructor(t,c,s,a,o,h){this.platformId=t,this.language=c,this.baseUrl=s,this.nonce=a,this.v3SiteKey=o,this.options=h;const l=this.init();this.ready=l?function A(n){return n.asObservable().pipe((0,k.p)(r=>null!==r))}(l):(0,E.of)()}init(){if(n.ready)return n.ready;if(!(0,p.UE)(this.platformId))return;const t=new x.t(null);return n.ready=t,g.newLoadScript({v3SiteKey:this.v3SiteKey,onBeforeLoad:c=>{if(this.options?.onBeforeLoad)return this.options.onBeforeLoad(c);const s=new URL(this.baseUrl??c);return this.language&&s.searchParams.set("hl",this.language),{url:s,nonce:this.nonce}},onLoaded:c=>{let s=c;this.options?.onLoaded&&(s=this.options.onLoaded(c)),t.next(s)}}),t}static#t=this.\u0275fac=function(c){return new(c||n)(e.KVO(e.Agw),e.KVO(_,8),e.KVO(j,8),e.KVO(M,8),e.KVO(T,8),e.KVO(F,8))};static#n=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})(),w=0,I=(()=>{class n{constructor(t,c,s,a){this.elementRef=t,this.loader=c,this.zone=s,this.id="ngrecaptcha-"+w++,this.errorMode="default",this.resolved=new e.bkB,this.error=new e.bkB,this.errored=new e.bkB,a&&(this.siteKey=a.siteKey,this.theme=a.theme,this.type=a.type,this.size=a.size,this.badge=a.badge)}ngAfterViewInit(){this.subscription=this.loader.ready.subscribe(t=>{null!=t&&t.render instanceof Function&&(this.grecaptcha=t,this.renderRecaptcha())})}ngOnDestroy(){this.grecaptchaReset(),this.subscription&&this.subscription.unsubscribe()}execute(){"invisible"===this.size&&(null!=this.widget?this.grecaptcha.execute(this.widget):this.executeRequested=!0)}reset(){null!=this.widget&&(this.grecaptcha.getResponse(this.widget)&&this.resolved.emit(null),this.grecaptchaReset())}get __unsafe_widgetValue(){return null!=this.widget?this.grecaptcha.getResponse(this.widget):null}expired(){this.resolved.emit(null)}onError(t){this.error.emit(t),this.errored.emit(t)}captchaResponseCallback(t){this.resolved.emit(t)}grecaptchaReset(){null!=this.widget&&this.zone.runOutsideAngular(()=>this.grecaptcha.reset(this.widget))}renderRecaptcha(){const t={badge:this.badge,callback:c=>{this.zone.run(()=>this.captchaResponseCallback(c))},"expired-callback":()=>{this.zone.run(()=>this.expired())},sitekey:this.siteKey,size:this.size,tabindex:this.tabIndex,theme:this.theme,type:this.type};"handled"===this.errorMode&&(t["error-callback"]=(...c)=>{this.zone.run(()=>this.onError(c))}),this.widget=this.grecaptcha.render(this.elementRef.nativeElement,t),!0===this.executeRequested&&(this.executeRequested=!1,this.execute())}static#e=this.\u0275fac=function(c){return new(c||n)(e.rXU(e.aKT),e.rXU(m),e.rXU(e.SKi),e.rXU(V,8))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["re-captcha"]],hostVars:1,hostBindings:function(c,s){2&c&&e.BMQ("id",s.id)},inputs:{id:"id",siteKey:"siteKey",theme:"theme",type:"type",size:"size",tabIndex:"tabIndex",badge:"badge",errorMode:"errorMode"},outputs:{resolved:"resolved",error:"error",errored:"errored"},exportAs:["reCaptcha"],decls:0,vars:0,template:function(c,s){},encapsulation:2})}return n})(),D=(()=>{class n{static#e=this.\u0275fac=function(c){return new(c||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({})}return n})(),K=(()=>{class n{static#e=this.\u0275fac=function(c){return new(c||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({providers:[m],imports:[D]})}return n})();var B=i(980),G=i(9437),N=i(6344),z=i(2243),L=i(4710),U=i(9605),$=i(9183),P=i(1780);const X=["recaptchaRef"];function H(n,r){1&n&&(e.qex(0),e.j41(1,"p"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"p"),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.j41(7,"p")(8,"a",8),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.EFF(11,". "),e.k0s(),e.bVm()),2&n&&(e.R7$(2),e.JRh(e.bMT(3,3,"feedback.thankYou")),e.R7$(3),e.JRh(e.bMT(6,5,"feedback.message")),e.R7$(4),e.JRh(e.bMT(10,7,"feedback.back")))}function Y(n,r){1&n&&(e.qex(0),e.j41(1,"p",9),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"p")(5,"a",8),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.EFF(8,". "),e.k0s(),e.bVm()),2&n&&(e.R7$(2),e.JRh(e.bMT(3,2,"feedback.error")),e.R7$(4),e.JRh(e.bMT(7,4,"feedback.back")))}function J(n,r){if(1&n&&(e.j41(0,"div",6),e.DNE(1,H,12,9,"ng-container",7)(2,Y,9,6,"ng-container",7),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.success),e.R7$(),e.Y8G("ngIf",!t.success)}}function W(n,r){if(1&n){const t=e.RV6();e.j41(0,"re-captcha",10,1),e.bIt("resolved",function(s){e.eBV(t);const a=e.XpG(2);return e.Njj(a.onCaptchaResolved(s))})("error",function(s){e.eBV(t);const a=e.XpG(2);return e.Njj(a.onCaptchaError(s))}),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("siteKey",t.captchaKey)}}function Q(n,r){if(1&n&&(e.j41(0,"div",3),e.DNE(1,J,3,2,"div",4)(2,W,2,1,"re-captcha",5),e.k0s()),2&n){const t=e.XpG(),c=e.sdS(3);e.R7$(),e.Y8G("ngIf",!t.loading)("ngIfElse",c),e.R7$(),e.Y8G("ngIf",t.captchaKey)}}function Z(n,r){1&n&&(e.j41(0,"div",12),e.nrm(1,"mat-spinner",13),e.k0s()),2&n&&(e.R7$(),e.Y8G("diameter",16))}function q(n,r){if(1&n&&e.DNE(0,Z,2,1,"div",11),2&n){const t=e.XpG();e.Y8G("ngIf",t.loading)}}let ee=(()=>{class n{constructor(t,c,s,a){this.api=t,this.route=s,this.platformId=a,this.loading=!0,this.success=!0,this.captchaType="V2_INVISIBLE_BADGE",c.init({[f.T.En]:{feedback:y},[f.T.Ro]:{feedback:C}},s.snapshot.params.lang)}ngOnInit(){(0,p.Vy)(this.platformId)||this.fetchCaptchaKey()}onCaptchaResolved(t){if(!t)return;const c={key:this.route.snapshot.params.key,feedbackType:this.route.snapshot.params.feedback.toUpperCase()};this.api.post("order/feedback",c,v.w.acc,{headers:{captchaType:this.captchaType,captchaResponse:t}}).pipe((0,B.j)(()=>this.loading=!1),(0,G.W)(a=>{throw this.success=!1,a})).subscribe()}onCaptchaError(t){this.loading=!1,this.success=!1}fetchCaptchaKey(){this.api.get(`recaptcha/site-key?recaptcha-type=${this.captchaType}`,v.w.au,{headers:{captchaType:this.captchaType}}).subscribe(t=>{this.captchaKey=t.siteKey,this.executeCaptcha()})}executeCaptcha(){this.recaptchaRef?this.recaptchaRef.execute():setTimeout(()=>this.executeCaptcha(),500)}static#e=this.\u0275fac=function(c){return new(c||n)(e.rXU(N.G),e.rXU(z.L),e.rXU(L.nX),e.rXU(e.Agw))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-order-feedback"]],viewQuery:function(c,s){if(1&c&&e.GBs(X,5),2&c){let a;e.mGM(a=e.lsd())&&(s.recaptchaRef=a.first)}},standalone:!0,features:[e.aNF],decls:4,vars:0,consts:[["loadingRef",""],["recaptchaRef",""],["content","","class","d-flex justify-content-center",4,"appShellNoRender"],["content","",1,"d-flex","justify-content-center"],["class","order-container",4,"ngIf","ngIfElse"],["size","invisible",3,"siteKey","resolved","error",4,"ngIf"],[1,"order-container"],[4,"ngIf"],["href","/"],[1,"text-accent"],["size","invisible",3,"resolved","error","siteKey"],["class","mt-6",4,"ngIf"],[1,"mt-6"],[3,"diameter"]],template:function(c,s){1&c&&(e.j41(0,"app-main-layout"),e.DNE(1,Q,3,3,"div",2),e.k0s(),e.DNE(2,q,1,1,"ng-template",null,0,e.C5r))},dependencies:[d.G,U.v,p.bT,$.LG,P.D9,K,I],styles:[".order-container[_ngcontent-%COMP%]{margin-top:3rem;text-align:center}p[_ngcontent-%COMP%]{margin-bottom:8px}"]})}return n})()}}]);